<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>에이트 약국 공동 주문 시스템</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="style.css">
    
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-50 text-gray-900 overflow-hidden">

    <header class="flex-none bg-white border-b border-gray-200 px-4 py-3 flex justify-between items-center shadow-sm z-50">
        <div>
            <h1 class="text-xl font-bold text-blue-600 tracking-tight">공동 주문 조회</h1>
            <p class="text-[10px] text-gray-400 font-medium">3개 약국 통합 재고 시스템</p>
        </div>
        <button onclick="window.location.reload()" class="p-2 active:bg-gray-100 rounded-full">
            <i data-lucide="refresh-cw" class="w-5 h-5 text-gray-500"></i>
        </button>
    </header>

    <div class="flex-none p-4 space-y-3 bg-gray-50 z-40 border-b border-gray-100">
        <div class="relative">
            <select id="pharmacyFilter" onchange="filterItems()" 
                    class="w-full p-3 bg-white border border-gray-200 rounded-2xl shadow-sm font-bold text-gray-700 appearance-none outline-none focus:ring-2 focus:ring-blue-500">
                <option value="all">모든 약국 전체보기</option>
                <option value="에이트 명동1번가">에이트 명동1번가</option>
                <option value="충무로에이트약국">충무로에이트약국</option>
                <option value="서초에이트약국">서초에이트약국</option>
            </select>
            <i data-lucide="chevron-down" class="absolute right-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"></i>
        </div>
        <div class="relative">
            <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"></i>
            <input type="text" id="searchInput" onkeyup="filterItems()" placeholder="약품명 또는 거래처 검색" 
                   class="w-full pl-10 pr-4 py-3 bg-white border border-gray-200 rounded-2xl shadow-sm outline-none focus:ring-2 focus:ring-blue-500">
        </div>
    </div>

    <main class="flex-1 swiper mySwiper w-full overflow-hidden">
        <div class="swiper-wrapper" id="swiperWrapper">
            </div>
    </main>

    <div class="pagination-container">
        <div class="swiper-pagination"></div>
    </div>

    <footer onclick="openCartModal()" class="flex justify-between items-center cursor-pointer">
        <div class="flex items-center gap-3">
            <div class="relative">
                <i data-lucide="shopping-basket" class="w-7 h-7 text-gray-700"></i>
                <span id="cartCount" class="absolute -top-1 -right-1 bg-red-500 text-white text-[10px] min-w-[18px] h-[18px] flex items-center justify-center rounded-full font-bold px-1 shadow-sm">0</span>
            </div>
            <div class="flex flex-col">
                <p id="cartStatusText" class="text-sm font-extrabold text-gray-800">장바구니가 비어있음</p>
                <p class="text-[10px] text-blue-500 font-medium">내역 확인하려면 여기를 터치</p>
            </div>
        </div>
        <button onclick="event.stopPropagation(); generateOrderReport();" 
                class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-3 rounded-2xl font-bold shadow-lg shadow-blue-100 active:scale-95 transition-all">
            주문서 생성
        </button>
    </footer>

    <div id="cartModal" class="fixed inset-0 z-[100] hidden">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeCartModal()"></div>
        
        <div class="absolute bottom-0 left-0 right-0 bg-white rounded-t-[30px] max-h-[85vh] flex flex-col animate-slide-up shadow-2xl">
            <div class="p-6 flex justify-between items-center border-b">
                <h2 class="text-xl font-black flex items-center gap-2">
                    <i data-lucide="shopping-cart" class="text-blue-600"></i>
                    주문 예정 목록
                </h2>
                <button onclick="closeCartModal()" class="p-2 bg-gray-100 rounded-full">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>
            
            <div id="modalCartList" class="overflow-y-auto p-4 flex-1 scroll-smooth">
                </div>

            <div class="p-4 bg-gray-50 flex gap-3 border-t">
                <button onclick="clearCart()" class="flex-1 py-4 bg-gray-200 text-gray-700 rounded-2xl font-bold active:bg-gray-300">비우기</button>
                <button onclick="generateOrderReport()" class="flex-[2] py-4 bg-blue-600 text-white rounded-2xl font-bold active:bg-blue-800 shadow-lg shadow-blue-100">주문서 출력</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>